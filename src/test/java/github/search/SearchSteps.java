package github.search;

import org.getopentest.testdef.TestDefAction;
import org.getopentest.testdef.TestDefinition;

import com.thoughtworks.gauge.Step;
import com.thoughtworks.gauge.datastore.DataStore;
import com.thoughtworks.gauge.datastore.DataStoreFactory;

public class SearchSteps {

	@Step("Navigate to GitHub")
	public void step1() {
		DataStore store = DataStoreFactory.getScenarioDataStore();
		TestDefinition test = (TestDefinition) store.get("test");
		TestDefAction action = (TestDefAction) store.get("action");
		action.setAction("org.getopentest.selenium.NavigateTo");
		action.addArg("url", "https://github.com");
		test.addAction("WEB", 1, action);

	}

	@Step("Search for repos containing <react>")
	public void step2(String term) {
		DataStore store = DataStoreFactory.getScenarioDataStore();
		TestDefinition test = (TestDefinition) store.get("test");
		TestDefAction action = (TestDefAction) store.get("action");
		action.setAction("org.getopentest.selenium.SendKeys");
		action.addArg("locator", "{ name: q }");
		action.addArg("text", term);
		action.addArg("sendEnter", true);
		test.addAction("WEB", 1, action);
	}

	@Step("A list of repos containing <react> is returned")
	public void step3(String term) {
		DataStore store = DataStoreFactory.getScenarioDataStore();
		TestDefinition test = (TestDefinition) store.get("test");
		TestDefAction action = (TestDefAction) store.get("action");
		action.setAction("org.getopentest.selenium.AssertElementVisible");
		action.addArg("locator", String.format("{ xpath: \"//a[@href='/facebook/%s']\" }", term));
		test.addAction("WEB", 1, action);
	}

}
